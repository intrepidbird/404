<!DOCTYPE html>
<html>
<head>
  <title>IntrepidBird</title>
  <meta charset="UTF-8">
  <style>
  html, body {
    height: 100%;
    margin: 0;
  }

  body.light-mode {
    background: white; /* Light mode background color */
    color: black; /* Light mode text color */
  }

  body.dark-mode {
    background: black; /* Dark mode background color */
    color: white; /* Dark mode text color */
  }

  body {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  canvas {
    border: 1px solid white;
  }
  </style>
</head>
<body class="dark-mode">
<canvas width="400" height="400" id="game"></canvas>
<button id="modeToggle">Toggle Dark Mode</button>
<script>
/**
 * Represents the Google Snake Game.
 */
class SnakeGame {
    /**
     * Constructor for the SnakeGame class.
     *
     * @param {HTMLElement} container - The HTML element where the game will be displayed.
     * @param {number} width - The width of the game area.
     * @param {number} height - The height of the game area.
     */
    constructor(container, width, height) {
        this.container = container;
        this.width = width;
        this.height = height;
        this.snake = [{ x: 10, y: 10 }];
        this.food = { x: 5, y: 5 };
        this.direction = "right";
        this.score = 0;
        this.interval = null;
    }

    /**
     * Initializes the game by creating the game area and starting the game loop.
     */
    init() {
        this.createGameArea();
        this.startGameLoop();
    }

    /**
     * Creates the game area by adding the necessary HTML elements to the container.
     */
    createGameArea() {
        const gameArea = document.createElement("div");
        gameArea.style.width = `${this.width * 20}px`;
        gameArea.style.height = `${this.height * 20}px`;
        gameArea.style.border = "1px solid black";
        gameArea.style.position = "relative";
        gameArea.style.overflow = "hidden";
        this.container.appendChild(gameArea);

        this.snake.forEach(segment => {
            const snakeSegment = document.createElement("div");
            snakeSegment.style.width = "20px";
            snakeSegment.style.height = "20px";
            snakeSegment.style.backgroundColor = "green";
            snakeSegment.style.position = "absolute";
            snakeSegment.style.left = `${segment.x * 20}px`;
            snakeSegment.style.top = `${segment.y * 20}px`;
            gameArea.appendChild(snakeSegment);
        });

        const food = document.createElement("div");
        food.style.width = "20px";
        food.style.height = "20px";
        food.style.backgroundColor = "red";
        food.style.position = "absolute";
        food.style.left = `${this.food.x * 20}px`;
        food.style.top = `${this.food.y * 20}px`;
        gameArea.appendChild(food);
    }

    /**
     * Starts the game loop.
     */
    startGameLoop() {
        this.interval = setInterval(() => {
            this.update();
            this.render();
        }, 200);
    }

    /**
     * Updates the game state.
     */
    update() {
        const head = { ...this.snake[0] };

        switch (this.direction) {
            case "up":
                head.y--;
                break;
            case "down":
                head.y++;
                break;
            case "left":
                head.x--;
                break;
            case "right":
                head.x++;
                break;
        }

        this.snake.unshift(head);

        if (head.x === this.food.x && head.y === this.food.y) {
            this.score++;
            this.generateFood();
        } else {
            this.snake.pop();
        }
    }

    /**
     * Renders the game state.
     */
    render() {
        const gameArea = this.container.querySelector("div");
        gameArea.innerHTML = "";

        this.snake.forEach(segment => {
            const snakeSegment = document.createElement("div");
            snakeSegment.style.width = "20px";
            snakeSegment.style.height = "20px";
            snakeSegment.style.backgroundColor = "green";
            snakeSegment.style.position = "absolute";
            snakeSegment.style.left = `${segment.x * 20}px`;
            snakeSegment.style.top = `${segment.y * 20}px`;
            gameArea.appendChild(snakeSegment);
        });

        const food = document.createElement("div");
        food.style.width = "20px";
        food.style.height = "20px";
        food.style.backgroundColor = "red";
        food.style.position = "absolute";
        food.style.left = `${this.food.x * 20}px`;
        food.style.top = `${this.food.y * 20}px`;
        gameArea.appendChild(food);
    }

    /**
     * Generates a new food at a random position within the game area.
     */
    generateFood() {
        const maxX = this.width - 1;
        const maxY = this.height - 1;

        this.food = {
            x: Math.floor(Math.random() * maxX) + 1,
            y: Math.floor(Math.random() * maxY) + 1
        };
    }

    /**
     * Handles keydown events to change the direction of the snake.
     *
     * @param {KeyboardEvent} event - The keydown event.
     */
    handleKeyDown(event) {
        switch (event.key) {
            case "ArrowUp":
                this.direction = "up";
                break;
            case "ArrowDown":
                this.direction = "down";
                break;
            case "ArrowLeft":
                this.direction = "left";
                break;
            case "ArrowRight":
                this.direction = "right";
                break;
        }
    }
}

// Usage Example for SnakeGame

// Create a container element to hold the game
const container = document.getElementById("game-container");

// Create a new instance of SnakeGame
const game = new SnakeGame(container, 20, 20);

// Initialize the game
game.init();

// Add event listener to handle keydown events
document.addEventListener("keydown", event => {
    game.handleKeyDown(event);
});
